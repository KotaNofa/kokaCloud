<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" type="text/css" href="/style.css?version=1">
  <script src="/loadhead.js" defer></script>
  <script src="/loadnav.js" defer></script> 
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>


  <body>
  <div class="navbar-container"></div>
  <div class="generic-container">
    <div class="generic-header-l">
      <h1>
        Misc projects I have going on!
      </h1>
    </div>

    <div class="generic-post">
      <h2>Hey! This part of the site is unfinished. Sorry!</h2>
      <br><h3>TODO: fix the flashing of unstylized content</h3>
      <br><h3>TODO: add different media types for backgrounds, esp JXL</h3>
      <br><h3>TODO: i wanna add a visitor count button or something</h3>
    oh right...
    </div>

    <br>

    <div class="generic-post">
      <h2>I have a minecraft server!</h2><br>
      <h3>its vanilla 1.21.4, ip is this domain, uh, havent implemented a status indicator yet though...</h3>
    </div>

    <div class="generic-post">
      <div class="mcstats"></div>
    </div>

  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {

    fetch('/mcstats')
        .then(response => response.json())
        .then(data => {

            const statusDiv = document.querySelector('.mcstats');

            statusDiv.innerHTML = '';

            if (data) {

                const motdInfo = document.createElement('div');
                motdInfo.innerHTML = data.result.motd.html;
                statusDiv.appendChild(motdInfo);

                const iconImg = document.createElement('img');
                iconImg.src = data.result.icon;
                statusDiv.appendChild(iconImg);

                const onlineStatus = document.createElement('div');
                onlineStatus.innerHTML = `<h3>Online Status:</h3><p>${data.result.online ? 'Online' : 'Offline'}</p>`;
                statusDiv.appendChild(onlineStatus);

                const playersInfo = document.createElement('div');
                playersInfo.innerHTML = `<h3>Players Info:</h3><p>Players Online: ${data.result.players.online || 'N/A'}</p><p>Max Players: ${data.result.players.max || 'N/A'}</p>`;
                statusDiv.appendChild(playersInfo);

                const versionInfo = document.createElement('div');
                versionInfo.innerHTML = `<h3>Minecraft Version:</h3><p>${data.result.version.name_raw || 'Unknown'}</p>`;
                statusDiv.appendChild(versionInfo);
            } else {
                statusDiv.innerHTML = '<p>Invalid server response</p>';
            }
        })
});
</script>

</body>
</html>
